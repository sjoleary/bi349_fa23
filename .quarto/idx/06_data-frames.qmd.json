{"title":"Intro to dataframes","markdown":{"headingText":"Intro to dataframes","containsRefs":false,"markdown":"\n\n```{r}\n#| label: set-up\n#| include: false\n\n# set options\nknitr::opts_chunk$set(\n  tidy = FALSE, \n  message = FALSE,\n\twarning = FALSE)\n\noptions(htmltools.dir.version = FALSE)\n\n```\n\n\n**Learning Objectives**\n\nAfter completing this lab you should be able to \n\n* read a data from a csv or tab-delimited file into R as a `data.frame`.\n* describe what a `data.frame` is.\n* inspect the contents of a data frame to summarize the content.\n* write a `data.frame` to file.\n\nFor each of our modules we will have a project-folder with an `Rproject`, `*.qmd`-files, and sub-directories for data, scripts, and results as described in our `Rproject` Tutorial. You should have a directory on your Desktop or Documents folder on your laptop (name it something like `bi349`) as a home directory for all of our project folders this semester. \n\n[If you have not already, go ahead and download the research compendium for this module using this link](https://drive.google.com/drive/folders/1Sh4mtvdii1k_vU4-mfvgIGwJsZvo8MOt?usp=sharing), make sure the directory is unzipped and move it to your `bi328` directory. You can open the `Rproj` for this module either by double clicking on it which will launch `Rstudio` or by opening `Rstudio` and then using `File > Open Project` or by clicking on the `Rproject` icon in the top right of your program window and selecting `Open Project`. \n\nOnce you have opened a project you should see the project name in the top right corner^[Pro tip: If you run into issues where a quarto document won't render or file paths aren't working (especially if things were working previously) one of your first steps should be to double check that the correct `Rproj` is loaded.].\n\nThere should be a document names `06_data-frames.qmd` in your project directory. Use that file to work through this tutorial - you will hand in your rendered (\"knitted\") `quarto` file as your homework assignment. So, first thing in the `YAML` header, change the author to your name. You will use this `quarto` document to record your answers. Remember to use comments to annotate your code; at minimum you should have one comment per code set^[You should do this whether you are adding code yourself or using code from our manual, even if it isn't commented in the manual... especially when the code is already included for you, add comments to describe how the function works/what it does as we introduce it during the participatory coding session so you can refer back to it.] you may of course add as many comments as you need to be able to recall what you did]. Similarly, take notes in the document as we discuss discussion/reflection questions but make sure that you go back and clean them up for \"public consumption\".\n\nLet's start by loading the packages we will need for this activity.\n\n```{r}\n\n# load libraries\nlibrary(tidyverse)\nlibrary(knitr)\n\n```\n\n## Reading data into R\n\n`library(tidyverse)` is actually loading a set of packages used for data science that share a common design philosophy, and \"grammar\". One of the packages we loaded is called `readr` which contains functions for reading in and parsing files.\n\nAt the end of Chapter 5 when we were exploring the usefulness of spreadsheets for data entry and management. You would have export the excel file with the catch data as `*.csv` (comma delimited) and as a tab-delimited text file (`*.txt` or `*.tsv` if exporting from google sheets).\n\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nUse `?read_delim` to pull up the help page for the function we will using and explore the arguments. How do you think we read in our csv file?\n\n:::\n\n\n::: {.callout-tip collapse=true}\n\n## Solution\n\n`read_delim` has two required arguments, the **path** (`data/longline_catchdata.csv`) which tells `R` where your file is located and the **delimiter** in this case a comma (`,`) tells `R` how columns are separated from each other.\n\n```{r eval=FALSE}\n\n# read catch data\ncatch <- read_delim(\"data/longline_catchdata.csv\", delim = \",\")\n\n```\n\nAs we access data sets that are not as \"clean\" as the one we have here, you will find that some of the other arguments apart from specifying the delimiter will come in handy - but don't worry about those for now.\n\n:::\n\nExecute the code. If you look over in your environment pane you should now see the object `catch`. This is your dataframe. Click on it, you should see the command `View(catch)` in your console and a tab `catch` appear in your top left pane.\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nBased on how you read in the csv file how would you read in the tab-delimited version?\n\n:::\n\n\n::: {.callout-tip collapse=true}\n\n## Solution\n\nWe need to change delimiter to indicate that it is tab-delimited. In this case, we would specify it as `\\t` is \"computer\" for tab. \n```{r}\n\n# read catch data\ncatch <- read_delim(\"data/longline_catchdata.txt\", delim = \"\\t\")\n\n```\n\nAnother delimiters you might encounter are white space (`\" \"`) but technically it could be anything. \n\n:::\n\nWhen you loaded your data set you should have seem an message along the lines of `parsed with column specification` and information on the number of columns and their data type. What this means is that `read_delim()` looks through the first 1,000 rows for each column and guesses the data type - usually this works pretty well though occasionally we will have to either specify the data types manually using the `col_types` argument or convert the data type later on.\n\nLet's use `class()` to figure out what type of object we are dealing with.\n\n```{r}\n\nclass(catch)\n\n```\n\nYou can see that this object actually has multiple classes attached to it. The last one in the list is `data.frame` which is the standard format for (rectangular) tabular data.\n\nRecall from our tutorial on vectors that each column in a `data.frame` is an atomic vector, they must all have the same length (hence, \"rectangular\") and each must contain the same data type (characters, integers, ...).\n\nThe other three have the same basic properties as a `data.frame` along with some additional features. The `tbl` (pronounced tibble) was designed to be at the center of the `tidyverse` which means that when you use `readr` functions it will automatically be read in as a tibble and `data.frame`. If you do some exploring and/or troubleshooting on the web you will likely run into tibbles but for our intents of purposes we will use `data.frame` when talking about data in a rectangual, tabular shape.\n\n\n## Inspecting your `data.frame`\n\nYou have of course already peaked at the data when you opened it in excel to export it in a text-based format. But not infrequently, you may access data from a public database or a collaborator might share a text-based formatted data set with you and the first thing that you are going to want to do is figure out what information is contained in the data set.\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Consider this\n\nYou know that this data set is the result from a long-lining survey and you're now basically an expert in formatting data - what information do you expect to find in this data set? How would you expect it to be formatted if this is a 'tidy data set'.\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nThere are several functions that you can use for a preliminary inspection of your data, including figuring out what dimensions it has and what information is contained in your data set.\n\nCall the following functions on your object and describe what each function does, what information you can learn about your data set from executing them, and when these could be helpful. \n\n* `dim()`, `nrow()`, `ncol()`\n* `str()`, `summary()`\n* `head()`, `tail()`\n* `colnames()`, `rownames()`\n* `View()`\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\n\n## Subsetting your dataframe\n\nSimilar to the way we were able to subset vectors, we can do the same things with our `data.frames` using rows and columns as our \"coordinates\" in the format `data_frame[row_index, column_index]`.\n\n\n### Using coordinates\n\nSo for example we can extract the first row and column from our `catch` object as\n\n```{r}\n\ncatch[1, 1]\n\n```\n\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nHow would you extract the 5th column from the third row?\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\n\nYou can select multiple rows or columns by specifying them using a vector.\n\n```{r}\n\ncatch[c(1, 20, 40), c(2, 5)]\n\n```\n\nYou can also select a set of adjacent rows (columns) using `:` as so\n\n```{r}\n\ncatch[500:505, 2:5]\n\n```\n\nYou can exclude indices using `-`\n\n```{r}\n\ncatch[1:5, -1]\n\n```\n\nYou can select all columns of a given row by leaving the column index blank; for example if we want to extract the first row.\n\n```{r}\n\ncatch[1, ]\n\n```\n\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nHow would you extract the entire 5th column?\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\n\n::: {.callout-tip collapse=true}\n\n## Solution\n\nThere are quite a few ways to do this: \n\n* you can use indices by number (as we have done up until this point)\n* instead of index numbers you can use the column name\n\nHere are two options using indices:\n\n```{r}\n\ncatch[, 1]\n\ncatch[1]\n\n```\n\nInstead of using indices you can also call their column names directly - both of these options will return a `data.frame`.\n\n```{r}\n\ncatch[\"Site\"]\n\ncatch[, \"Site\"]\n\n```\n\n:::\n\n### Extracting columns as vectors\n\nUsing `[]` will always return a subset of your dataframe as a data frame. Occassionally, we might want to extract the column as a vector. You can do this using square brackets `[[]]` or `$`.\n\n```{r}\n\ncatch[[\"Site\"]]\n\ncatch$Site\n\n```\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nCreate a vector of all the species in the data set called `species`.\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\nIf you call the vector by typing its name (`species`) in the console you will notice that it repeats the species names.\n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nExecute the following code chunk and describe what this function does:\n\n```{r}\n#| eval: false\n\nunique(species)\n\n```\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\nUsing indices might seem a little bit clunky, e.g. you have to know which column and row is which by position but it has its practical applications and is computationally very fast. For most of our data wrangling we will be using functions from the tidyverse packages `dplyr` and `tidyr` which work a little bit more intuitively.\n\n\n## Write `data.frame` to file\n\nFrequently, we will process raw data sets and then need to write intermediate or final results to file, for example to share them with collaborators. Here, the `readr` packages comes in handy. \n\n::: {.callout-note icon=false}\n\n## {{< fa clipboard-question >}}   Give it a whirl\n\nCreate a subset of our data set consisting of the first 100 rows and containing information on the species, sex and fork length. Then use the help page for the function `write_delim()` to figure out how to write out a tab-delimited file into your `data` folder.\n\n:::\n\n\n::: {.callout-important icon=false}\n\n## {{< fa pen >}}   Did it!\n\n[Your answer here]\n\n:::\n\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","reference-location":"margin","toc":true,"toc-depth":2,"number-sections":true,"embed-resources":true,"output-file":"06_data-frames.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["references.bib"],"citation-location":"margin","fig-cap-location":"margin","tbl-cap-location":"margin","theme":"cosmo","toc-location":"left","code-copy":"hover","anchor-sections":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}